{% load static from staticfiles %}

<script src="{% static 'bootstrap/js/jquery.slimscroll.min.js' %}"></script>
<script>
    var roomList = new Array();
    var roomCount =0;
</script>
<br>
<center>
<table width=1000>	
	<tr>
		<td colspan=6 align=left>
			<input type="text" class="search-query span3" data-provide="typeahead" placeholder="Search Rooms"><br><br>
		</td>
		<td rowspan=100% width=5>
			&nbsp;		
		</td>
		<td width=180 rowspan=100% valign=top align=left>
			{% if logged_in %}
			<button class="btn btn-large btn-primary" type="button" href="#leagueConfig" data-toggle="modal">Create Room</button>		
			<br>	
			<br>
			{% endif %}
			<button class="btn btn-large btn-primary" type="button">Find Random</button>			
			<br>	
			<br>
			<button class="btn btn-large btn-primary" type="button">Invite Others</button>	
			<br>	
			<br>	
			<br>	
			<br>
			<font color="#999999">				
			<div class="control-group" align=left>
				<label class="control-label" ><i><b><h4>Filter Rooms</h4></b></i></label>
				<div class="controls">
					<label class="checkbox">
					  <input type="checkbox" value="" checked>
					  Standard
					</label>
					<label class="checkbox">
					  <input type="checkbox" value="" checked>
					  PPR
					</label>
				</div>
			</div>
			<button class="btn btn-primary" type="button">Search</button>	
			</font>
		</td>
	</tr>
	<tr valign=middle>
		<td width=815 valign=middle>
			<div class="some-content-related-div" align="left">
				<div id="listOfRooms">
					<table width=800>
						{% for oneRoom in draftList %}
							<tr valign=middle>
								<td width=800 valign=middle>
									<div class="alert ">
										<table width=100%>
											<tr style="height:10px;" >
												<td colspan=100%>
												</td>
											</tr>
											<tr>
												<td>
													<h4>&nbsp;{{ oneRoom.name }}&nbsp;&nbsp;&nbsp; <i></i></h4>
                                                    <script>
                                                        roomCount = roomCount+1;
                                                        roomList[roomCount]="{{ oneRoom.name }}";
                                                    </script>

												</td>
												<td width=90>
													ID: {{ oneRoom.league_id }}
												</td>
												<td width=25>
													{% if oneRoom.password == "" %}
                                                        <i class="icon-globe icon-black"></i>
                                                    {% else %}
                                                        <i class="icon-briefcase icon-black"></i>
                                                    {% endif %}
                                                </td>
												<td width=50>
													{{ oneRoom.settings.draft_type }}
												</td>
												<td width=50>
													<span class="badge badge-success">{{ oneRoom.teamCount }}/{{ oneRoom.settings.number_of_teams }}</span>
												</td>
												<td width=125>
													<span class="badge badge-important">Begins at {{ oneRoom.settings.draft_date|date:"H-m" }}</span>
												</td>
												<td align=right width=45>
                                                    {% if oneRoom.password == "" %}
													<a href="/draftroom/{{ oneRoom.league_id }}"><button class="btn btn btn-primary" type="button"><i class="icon-eye-open icon-white"></i></button></a>
                                                    {% endif %}
												</td>
												{% if logged_in %}
                                                    <td align=right width=45>
                                                        <button id="joinRoom" class="btn btn btn-primary" type="button" href="#leagueJoin_{{ oneRoom.league_id }}" data-toggle="modal"><i class="icon-plus icon-white" ></i></button>

                                                    </td>
                                                {% endif %}
											</tr>
											<tr style="height:10px;">
												<td colspan=100%>
												</td>
											</tr>
										</table>							
									</div>
								</td>
							</tr>
					{% endfor %}
					</table>
				</div>
			</div>
		</td>
	</tr>
</table>
</center>


{% for oneRoom in draftList %}
    <div id="leagueJoin_{{ oneRoom.league_id }}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
            <h3><i>Joining</i> "{{ oneRoom.name }}"</h3>
        </div>
        <form class="form-horizontal">
            <br>
            <div>
                <div class="control-group">
                    <label class="control-label" for="joinLeagueID">League ID</label>
                    <div class="controls" >
                        <label class="control-label" id="joinLeagueID">{{ oneRoom.league_id }}</label>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="teamName">Team Name</label>
                    <div class="controls">
                        <input type="text" id="teamName" placeholder="Team Name">
                    </div>
                </div>
            </div>
            {% if oneRoom.league_owner.username != "moneyball" %}
                <div id="secretKey">
                    <div class="control-group">
                        <label class="control-label" for="entryKey">Secret Entry Key</label>
                        <div class="controls">
                            <input type="text" id="entryKey" placeholder="Secret">
                        </div>
                    </div>
                </div>
            {% endif %}
        </form>
        <div class="modal-footer" align="right">
            <div class="control-group">
                <div class="controls">
                    <a href="/draftroom/{{ oneRoom.league_id }}"><button type="submit" class="btn btn-primary">Join Room</button></a>
                </div>
            </div>
        </div>
    </div>
{% endfor %}
<script>
$(function(){
    $('#listOfRooms').slimScroll({
        height: '550px',
		width: 'width',
		alwaysVisible: false,
		railVisible: true,
		size: '9px',
		color: '#ffffff',	
		railColor: '#999999',	
		disableFadeOut: false
    });

});
</script>
