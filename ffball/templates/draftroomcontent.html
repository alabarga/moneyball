{% load static from staticfiles %}

<script src="{% static 'bootstrap/js/jquery.slimscroll.min.js' %}"></script>	
<br>
<center>
	<table width=1000>
		<tr>
			<td Width=300 valign=top >
				<div id="listOfRooms" >
					<font color="#999999">
					<table width=100% class="table-hover">
                        {% for team in draft_order %}
                       <tr name="teams" id="team-{{ forloop.counter }}">
                           <td>
								&nbsp;
                           </td>
							<td>
								<h4>#{{ forloop.counter }}</h4>
							</td>
                           {% if team %}
							<td>
								<img src="{% static 'img/tiger.jpg' %}" width=50 class="img-rounded">
							</td>
							<td >
								<h4>{{ team.team_name }}</h4>
							</td>
                           {% else %}
							<td>
								<img src="{% static 'img/no_photo.png' %}" width=50 class="img-rounded">
							</td>
							<td >
								<h6>&lt; Empty Place &gt;</h6>
							</td>
                           {% endif %}

                       </tr>
                        {% endfor %}

					</table>
					</font>
				</div>
                <button type="submit" formmethod="post" onclick="save('{{ draft_room_id }}')" name="saveOrder" value="Save Order">SaveOrder </button>
            </td>
			<td valign=top width=700>			
				<font color="#999999">
				<table width=100%>
					<tr >
						<td align=right>
							<img src="{% static 'img/clock.jpg' %}" class="img-rounded">
							<font color="#ffffff">
								<br>
								Draft starts in 9 min
							</font>
						</td>
					</tr>
					<tr>
						<td>
						<div class="accordion" id="accordion3">
						  <div class="accordion-group">
							<div class="accordion-heading">
							  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#leftcollapseOne">
								<h4>General Draft Settings</h4>
							  </a>
							</div>
							<div id="leftcollapseOne" class="accordion-body collapse in">
							  <div class="accordion-inner">
								<form class="form-horizontal">
									<br>
									<div id="stdLoginCtl">
										<div class="control-group">
											<label class="control-label" for="inputEmail">Email</label>
											<div class="controls">
												<input type="text" id="inputEmail" placeholder="Email">
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">Password</label>
											<div class="controls">
												<input type="password" id="inputPassword" placeholder="Password">
											</div>
										</div>
										<div class="control-group">
											<div class="controls">
												<label class="checkbox">
													<input type="checkbox"> <i>Remember me</i>
												</label>
											</div>
										</div>
										<div class="control-group">
											<div class="controls">
												<button type="submit" class="btn btn-primary">Sign in</button>
											</div>
										</div>
									</div>
									<div id="newUserCtl">
										<div class="control-group">
											<label class="control-label" for="inputEmail">Email</label>
											<div class="controls">
												<input type="text" id="inputEmail" placeholder="Email">
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">Password</label>
											<div class="controls">
												<input type="password" id="inputPassword" placeholder="Password">
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">Retype Password</label>
											<div class="controls">
												<input type="password" id="inputPassword" placeholder="Password">
											</div>
										</div>
										<div class="control-group">
											<div class="controls">
												<button type="submit" class="btn btn-primary">Sign Up</button>
											</div>
										</div>
									</div>
								</form>								
							  </div>
							</div>
						  </div>
						  <div class="accordion-group">
							<div class="accordion-heading">
							  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#leftcollapseTwo">
								<h4>Advanced Settings</h4>
							  </a>
							</div>
							<div id="leftcollapseTwo" class="accordion-body collapse">
							  <div class="accordion-inner">
								<form class="form-horizontal">
									<br>
									<div id="stdLoginCtl">
										<div class="control-group">
											<label class="control-label" for="inputEmail">Email</label>
											<div class="controls">
												<input type="text" id="inputEmail" placeholder="Email">
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">Password</label>
											<div class="controls">
												<input type="password" id="inputPassword" placeholder="Password">
											</div>
										</div>
										<div class="control-group">
											<div class="controls">
												<label class="checkbox">
													<input type="checkbox"> <i>Remember me</i>
												</label>
											</div>
										</div>
										<div class="control-group">
											<div class="controls">
												<button type="submit" class="btn btn-primary">Sign in</button>
											</div>
										</div>
									</div>
									<div id="newUserCtl">
										<div class="control-group">
											<label class="control-label" for="inputEmail">Email</label>
											<div class="controls">
												<input type="text" id="inputEmail" placeholder="Email">
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">Password</label>
											<div class="controls">
												<input type="password" id="inputPassword" placeholder="Password">
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">Retype Password</label>
											<div class="controls">
												<input type="password" id="inputPassword" placeholder="Password">
											</div>
										</div>
										<div class="control-group">
											<div class="controls">
												<button type="submit" class="btn btn-primary">Sign Up</button>
											</div>
										</div>
									</div>
								</form>
							  </div>
							</div>
						  </div>
						</div>
						</td>
					</tr>
				</table>
				</font>
			</td>
		</tr>
	</table>
</center>
<text>0</text>
<script>
$(function(){
    $('#listOfRooms').slimScroll({
		height: '600px',
		width: 'auto',
		alwaysVisible: false,
		railVisible: true,
		size: '9px',
		color: '#ffffff',	
		railColor: '#999999',	
		disableFadeOut: false
    });
});


// using jQuery
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

var csrftoken = getCookie('csrftoken');
function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}

function sameOrigin(url) {
    // test that a given url is a same-origin URL
    // url could be relative or scheme relative or absolute
    var host = document.location.host; // host + port
    var protocol = document.location.protocol;
    var sr_origin = '//' + host;
    var origin = protocol + sr_origin;
    // Allow absolute or scheme relative URLs to same origin
    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
        // or any other URL that isn't scheme relative or absolute i.e relative.
        !(/^(\/\/|http:|https:).*/.test(url));
}

$.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
            // Send the token to same-origin, relative URLs only.
            // Send the token only if the method warrants CSRF protection
            // Using the CSRFToken value acquired earlier
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
    }
});

function save( page_id ) {
    a=[]
//    $('.saveOrder').click(function () {
    alert("here");
        $.ajax({
            type: "POST",
            url: page_id,
            data: "{draft_order : abcdefg }",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {

                var result = response.d;
                var value = '';
                $.each(result, function (index, res) {
                    value = value + res.id + res.name;
                });

                alert(value);
                alert("Record was updated successfully,,");
            },
            error: function (msg) {
                alert("Error while calling web service," + msg.Message);
            }
        });

//    });
}

</script>